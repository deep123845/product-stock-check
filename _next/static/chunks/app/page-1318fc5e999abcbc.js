(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6777:(e,r,t)=>{Promise.resolve().then(t.bind(t,6888))},6888:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var l=t(5155),s=t(2115);let a=e=>{let{onFileContentChange:r}=e,[t,a]=(0,s.useState)(null),[d,o]=(0,s.useState)(null),n=e=>e.split("\n").filter(e=>e.length>0);return(0,l.jsxs)("div",{className:"p-4 border rounded shadow mt-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Upload and Parse Text File:"}),(0,l.jsx)("input",{type:"file",accept:".txt",onChange:e=>{var t;let l=null==(t=e.target.files)?void 0:t[0];if(l){a(l.name),o(null);let e=new FileReader;e.onload=e=>{if(e.target&&"string"==typeof e.target.result){let t=e.target.result;r&&r(n(t))}},e.onerror=()=>{o("Failed to read file."),r&&r([])},e.readAsText(l)}else a(null),o("No file selected."),r&&r([])},className:"mb-4"}),d&&(0,l.jsxs)("div",{className:"text-red-500 mb-2",children:["Error: ",d]}),t&&(0,l.jsxs)("p",{className:"mb-2",children:["Selected file: ",(0,l.jsx)("span",{className:"font-semibold",children:t})]})]})},d=e=>{let{productHistory:r,months:t}=e,s=Object.keys(t).map(Number).sort((e,r)=>r-e);return(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"border border-gray-300 p-2",children:"Product No"}),(0,l.jsx)("th",{className:"border border-gray-300 p-2",children:"Description"}),(0,l.jsx)("th",{className:"border border-gray-300 p-2",children:"Stock"}),s.map(e=>(0,l.jsx)("th",{className:"border border-gray-300 p-2",children:t[e]},e))]})}),(0,l.jsx)("tbody",{children:r.map((e,r)=>(0,l.jsxs)("tr",{className:r%2==0?"bg-black":"bg-gray-800",children:[(0,l.jsx)("td",{className:"border border-gray-300 p-2",children:e.productNo}),(0,l.jsx)("td",{className:"border border-gray-300 p-2",children:e.description}),(0,l.jsx)("td",{className:"border border-gray-300 p-2",children:e.stock}),s.map(r=>(0,l.jsx)("td",{className:"border border-gray-300 p-2",children:e.sales[r]||0},r))]},r))})]})})};function o(){let[e,r]=(0,s.useState)([]),t=(e=>{let r=[];for(let t=4;t<e.length;t++){let l=e[t-1].split("	"),s=e[t].split("	"),a=l.slice(-4).join("	")+s.slice(0,-4).join("	");r.push(a)}return r})(e),o=e=>/^\d{2}-\d{4}$/.test(e),n=(()=>{let r=new Set;for(let t=0;t<e.length;t++){let l=e[t].split("	");for(let e=0;e<l.length;e++)o(l[e])&&r.add(l[e])}let t=Array.from(r).sort((e,r)=>{let[t,l]=e.split("-").map(Number),[s,a]=r.split("-").map(Number);return l===a?t-s:l-a}),l={};return t.forEach((e,r)=>{l[r]=e}),l})(),c=(e=>{let r=[];for(let t=0;t<e.length;t++){let l=e[t].split("	"),s=l[0],a=l[1],d=l[2],c=parseInt(l[3]),i={},h=[];for(let e=4;e<l.length;e++)if(o(l[e])){let r=Object.entries(n).find(r=>r[1]===l[e]);if(r){let e=parseInt(r[0]);i[e]=0,h.push(e)}}let p=l.findIndex(e=>"Sold Qty"===e)+1;for(let e=0;e<h.length;e++)i[h[e]]=parseInt(l[p+e]);r.push({productNo:s,supplier:a,description:d,stock:c,sales:i})}return r})(t);return console.log("Product History:",c),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mt-8",children:"Product Stock Check"}),(0,l.jsx)("p",{className:"text-center mt-4",children:"Upload a text file to check product stock."}),(0,l.jsx)(a,{onFileContentChange:e=>{r(e)}}),(0,l.jsx)(d,{productHistory:c,months:n})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[441,684,358],()=>r(6777)),_N_E=e.O()}]);